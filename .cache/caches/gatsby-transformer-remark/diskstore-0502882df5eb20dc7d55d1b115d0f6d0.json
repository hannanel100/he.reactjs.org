{"expireTime":9007200917365139000,"key":"transformer-remark-markdown-ast-da3b1ac3384c888e07b47f00ba9d3609-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-external-linksgatsby-remark-header-custom-idsgatsby-remark-code-replsgatsby-remark-embed-snippetgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Hooks","position":{"start":{"line":2,"column":2,"offset":2},"end":{"line":2,"column":7,"offset":7},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8},"indent":[]}},{"type":"text","value":" נוספו ב-React 16.8. הם מאפשרים לנו להשתמש ב- state ופיצ’רים נוספים של ריאקט מבלי לכתוב מחלקה.","position":{"start":{"line":2,"column":8,"offset":8},"end":{"line":2,"column":102,"offset":102},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":102,"offset":102},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"ה-","position":{"start":{"line":4,"column":1,"offset":104},"end":{"line":4,"column":3,"offset":106},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Effect Hook","position":{"start":{"line":4,"column":4,"offset":107},"end":{"line":4,"column":15,"offset":118},"indent":[]}}],"position":{"start":{"line":4,"column":3,"offset":106},"end":{"line":4,"column":16,"offset":119},"indent":[]}},{"type":"text","value":" נותן לנו לבצע תופעות לוואי בתוך קומפוננטות פונקציונליות:","position":{"start":{"line":4,"column":16,"offset":119},"end":{"line":4,"column":73,"offset":176},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":104},"end":{"line":4,"column":73,"offset":176},"indent":[]}},{"type":"html","lang":"jsx{1,6-10}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// דומה ל- ComponentDidMount ו- componentDidUpdate:</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// עדכון כותרת העמוד על ידי שימוש ב-API של הדפדפן</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">לחצת </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> פעמים</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        לחץ עליי</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":6,"column":1,"offset":178},"end":{"line":27,"column":4,"offset":652},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"הקטע לעיל מבוסס על ","position":{"start":{"line":29,"column":1,"offset":654},"end":{"line":29,"column":20,"offset":673},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-state.html","children":[{"type":"text","value":"דוגמת ה- counter מהעמוד הקודם","position":{"start":{"line":29,"column":21,"offset":674},"end":{"line":29,"column":50,"offset":703},"indent":[]}}],"position":{"start":{"line":29,"column":20,"offset":673},"end":{"line":29,"column":75,"offset":728},"indent":[]}},{"type":"text","value":", אבל הוספנו פיצ’ר חדש לזה: קובעים את כותרת העמוד להודעה מותאמת כשכוללת את מספר ההקלקות.","position":{"start":{"line":29,"column":75,"offset":728},"end":{"line":29,"column":163,"offset":816},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":654},"end":{"line":29,"column":163,"offset":816},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אחזור מידע, הגדרת subscription, ושינוי ידני של ה- DOM בקומפוננטות ריאקט הם כולם דוגמאות של תופעות לוואי. בין אם לאו דווקא אתה רגיל לקרוא לפעולות הללו “תופעות לוואי” (או רק “תופעות”), רוב הסיכויים שביצעת אותן בקומפוננטות שלך בעבר.","position":{"start":{"line":31,"column":1,"offset":818},"end":{"line":31,"column":230,"offset":1047},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":818},"end":{"line":31,"column":230,"offset":1047},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"טיפ","position":{"start":{"line":33,"column":2,"offset":1050},"end":{"line":33,"column":5,"offset":1053},"indent":[]}}],"position":{"start":{"line":33,"column":2,"offset":1050},"end":{"line":33,"column":5,"offset":1053},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אם יש לך נסיון עם מתודות מחזור חיים במחלקות ריאקט, אתה יכול לחשוב על ","position":{"start":{"line":35,"column":2,"offset":1057},"end":{"line":35,"column":71,"offset":1126},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":35,"column":71,"offset":1126},"end":{"line":35,"column":82,"offset":1137},"indent":[]}},{"type":"text","value":" כ- ","position":{"start":{"line":35,"column":82,"offset":1137},"end":{"line":35,"column":86,"offset":1141},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":35,"column":86,"offset":1141},"end":{"line":35,"column":105,"offset":1160},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":35,"column":105,"offset":1160},"end":{"line":35,"column":107,"offset":1162},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":35,"column":107,"offset":1162},"end":{"line":35,"column":127,"offset":1182},"indent":[]}},{"type":"text","value":", ו- ","position":{"start":{"line":35,"column":127,"offset":1182},"end":{"line":35,"column":132,"offset":1187},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":35,"column":132,"offset":1187},"end":{"line":35,"column":154,"offset":1209},"indent":[]}},{"type":"text","value":" משולבות.","position":{"start":{"line":35,"column":154,"offset":1209},"end":{"line":35,"column":163,"offset":1218},"indent":[]}}],"position":{"start":{"line":35,"column":2,"offset":1057},"end":{"line":35,"column":163,"offset":1218},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1049},"end":{"line":35,"column":163,"offset":1218},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"ישנם שני סוגים של תופעות לוואי בקומפוננטות ריאקט: אלה שלא דורשים ניקוי, ואלה שכן. נסתכל על הבחנה זו ביתר פירוט.","position":{"start":{"line":37,"column":1,"offset":1220},"end":{"line":37,"column":112,"offset":1331},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1220},"end":{"line":37,"column":112,"offset":1331},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#effects-without-cleanup","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Effects ללא ניקוי ","position":{"start":{"line":39,"column":4,"offset":1336},"end":{"line":39,"column":48,"offset":1380},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1333},"end":{"line":39,"column":48,"offset":1380},"indent":[]},"data":{"id":"effects-without-cleanup","htmlAttributes":{"id":"effects-without-cleanup"},"hProperties":{"id":"effects-without-cleanup"}}},{"type":"paragraph","children":[{"type":"text","value":"לעיתים, אנו רוצים ","position":{"start":{"line":41,"column":1,"offset":1382},"end":{"line":41,"column":19,"offset":1400},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"להריץ קוד נוסף לאחר שריאקט עדכנה את ה- DOM.","position":{"start":{"line":41,"column":21,"offset":1402},"end":{"line":41,"column":64,"offset":1445},"indent":[]}}],"position":{"start":{"line":41,"column":19,"offset":1400},"end":{"line":41,"column":66,"offset":1447},"indent":[]}},{"type":"text","value":" בקשות רשת, שינויים ידניים של ה- DOM, ו- logging הם דוגמאות של effects שלא דורשים ניקוי. אנו אומרים זאת בגלל שניתן להריץ אותם ומיד לשכוח מהם. הבה נשווה בין איך מחלקות ו-Hooks נותנים לנו לבטא את תופעות הלוואי הללו.","position":{"start":{"line":41,"column":66,"offset":1447},"end":{"line":41,"column":279,"offset":1660},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1382},"end":{"line":41,"column":279,"offset":1660},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-using-classes","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"דוגמאות עם שימוש במחלקות ","position":{"start":{"line":43,"column":5,"offset":1666},"end":{"line":43,"column":54,"offset":1715},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1662},"end":{"line":43,"column":54,"offset":1715},"indent":[]},"data":{"id":"example-using-classes","htmlAttributes":{"id":"example-using-classes"},"hProperties":{"id":"example-using-classes"}}},{"type":"paragraph","children":[{"type":"text","value":"במחלקות קומפוננטות בריאקט, המתודה ","position":{"start":{"line":45,"column":1,"offset":1717},"end":{"line":45,"column":35,"offset":1751},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render</code>","position":{"start":{"line":45,"column":35,"offset":1751},"end":{"line":45,"column":43,"offset":1759},"indent":[]}},{"type":"text","value":" לא אמורה ליצור תופעות לוואי. זה יהיה מוקדם מדי – בדרך כלל נרצה לבצע את ה- effects שלנו ","position":{"start":{"line":45,"column":43,"offset":1759},"end":{"line":45,"column":131,"offset":1847},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"לאחר","position":{"start":{"line":45,"column":132,"offset":1848},"end":{"line":45,"column":136,"offset":1852},"indent":[]}}],"position":{"start":{"line":45,"column":131,"offset":1847},"end":{"line":45,"column":137,"offset":1853},"indent":[]}},{"type":"text","value":" שריאקט עדכנה את ה- DOM.","position":{"start":{"line":45,"column":137,"offset":1853},"end":{"line":45,"column":161,"offset":1877},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1717},"end":{"line":45,"column":161,"offset":1877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"זאת הסיבה שבמחלקות ריאקט, אנו שמים תופעות לוואי בתוך ","position":{"start":{"line":47,"column":1,"offset":1879},"end":{"line":47,"column":54,"offset":1932},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":47,"column":54,"offset":1932},"end":{"line":47,"column":73,"offset":1951},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":47,"column":73,"offset":1951},"end":{"line":47,"column":77,"offset":1955},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":47,"column":77,"offset":1955},"end":{"line":47,"column":97,"offset":1975},"indent":[]}},{"type":"text","value":". בחזרה לדוגמה שלנו, הנה מחלקת counter בקומפוננטה שמעדכנת את כותרת העמוד מיד לאחר שריאקט משנה את ה-DOM:","position":{"start":{"line":47,"column":97,"offset":1975},"end":{"line":47,"column":200,"offset":2078},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1879},"end":{"line":47,"column":200,"offset":2078},"indent":[]}},{"type":"html","lang":"jsx{9-15}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">לחצת </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> פעמים</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          לחץ עליי</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":49,"column":1,"offset":2080},"end":{"line":77,"column":4,"offset":2617},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"שים לב כיצד ","position":{"start":{"line":79,"column":1,"offset":2619},"end":{"line":79,"column":13,"offset":2631},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"אנו צריכים לשכפל את הקוד בין שתי מתודות מחזור החיים במחלקה.","position":{"start":{"line":79,"column":15,"offset":2633},"end":{"line":79,"column":74,"offset":2692},"indent":[]}}],"position":{"start":{"line":79,"column":13,"offset":2631},"end":{"line":79,"column":76,"offset":2694},"indent":[]}}],"position":{"start":{"line":79,"column":1,"offset":2619},"end":{"line":79,"column":76,"offset":2694},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"זה בגלל שבמקרים רבים אנו רוצים לבצע את אותה תופעת הלוואי ללא קשר לאם הקומפוננטה “הותקנה”(mounted), או אם היא עודכנה. מבחינה מושגית, אנו רוצים שזה יקרה אחרי כל רינדור – אבל לקומפוננטות מחלקתיות בריאקט אין מתודה כזאת. נוכל לחלץ מתודה נפרדת אבל נצטרך עדיין לקרוא לה בשתי מקומות. ","position":{"start":{"line":81,"column":1,"offset":2696},"end":{"line":81,"column":277,"offset":2972},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":2696},"end":{"line":81,"column":277,"offset":2972},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"הבה נראה כיצד נוכל לעשות את אותו הדבר עם ","position":{"start":{"line":83,"column":1,"offset":2974},"end":{"line":83,"column":42,"offset":3015},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":83,"column":42,"offset":3015},"end":{"line":83,"column":53,"offset":3026},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":83,"column":53,"offset":3026},"end":{"line":83,"column":54,"offset":3027},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2974},"end":{"line":83,"column":54,"offset":3027},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-using-hooks","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"דוגמא של שימוש ב- Hooks ","position":{"start":{"line":85,"column":5,"offset":3033},"end":{"line":85,"column":51,"offset":3079},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":3029},"end":{"line":85,"column":51,"offset":3079},"indent":[]},"data":{"id":"example-using-hooks","htmlAttributes":{"id":"example-using-hooks"},"hProperties":{"id":"example-using-hooks"}}},{"type":"paragraph","children":[{"type":"text","value":"ראינו כבר את הדוגמא הזו בראש העמוד, אבל הבה נסתכל עליה מקרוב:","position":{"start":{"line":87,"column":1,"offset":3081},"end":{"line":87,"column":62,"offset":3142},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":3081},"end":{"line":87,"column":62,"offset":3142},"indent":[]}},{"type":"html","lang":"jsx{1,6-8}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">לחצת </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> פעמים</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        לחץ עליי</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":89,"column":1,"offset":3144},"end":{"line":108,"column":4,"offset":3502},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"מה useEffect עושה?","position":{"start":{"line":110,"column":3,"offset":3506},"end":{"line":110,"column":21,"offset":3524},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3504},"end":{"line":110,"column":23,"offset":3526},"indent":[]}},{"type":"text","value":" על ידי שימוש ב-Hook הזה, אנו אומרים לריאקט שהקומפוננטה שלך צריכה לעשות משהו לאחר הרינדור. ריאקט תזכור את הפונקציה שהעברת (נתייחס אל זה כה- effect שלנו), ונקרא לה לאחר ביצוע עדכוני ה-DOM. ב-effect הזה, אנו קובעים את כותרת העמוד, אבל נוכל בנוסף לבצע אחזור מידע או לקרוא ל- API  הכרחי אחר.","position":{"start":{"line":110,"column":23,"offset":3526},"end":{"line":110,"column":310,"offset":3813},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":3504},"end":{"line":110,"column":310,"offset":3813},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"מדוע קוראים ל- useEffect בתוך קומפוננטה?","position":{"start":{"line":112,"column":3,"offset":3817},"end":{"line":112,"column":43,"offset":3857},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":3815},"end":{"line":112,"column":45,"offset":3859},"indent":[]}},{"type":"text","value":" הצבת ","position":{"start":{"line":112,"column":45,"offset":3859},"end":{"line":112,"column":51,"offset":3865},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":112,"column":51,"offset":3865},"end":{"line":112,"column":62,"offset":3876},"indent":[]}},{"type":"text","value":" בתוך הקומפוננטה נותנת לנו גישה למשתנה- ","position":{"start":{"line":112,"column":62,"offset":3876},"end":{"line":112,"column":102,"offset":3916},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":112,"column":102,"offset":3916},"end":{"line":112,"column":110,"offset":3924},"indent":[]}},{"type":"text","value":" state (או כל prop אחר) ישר מה-effect. אנו לא צריכים API מיוחד על מנת לקרוא אותו – זה כבר בתוך ה- scope של הפונקציה. Hooks משתמשים ב- closures ונמנעים מהצגת APIs ספציפיים של ריאקט היכן ש-JavaScript נותנת פתרון.","position":{"start":{"line":112,"column":110,"offset":3924},"end":{"line":112,"column":320,"offset":4134},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":3815},"end":{"line":112,"column":320,"offset":4134},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"האם useEffect רץ אחרי כל רינדור?","position":{"start":{"line":114,"column":3,"offset":4138},"end":{"line":114,"column":35,"offset":4170},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4136},"end":{"line":114,"column":37,"offset":4172},"indent":[]}},{"type":"text","value":" כן! כברירת מחדל, זה רץ גם אחרי הרינדור הראשון ","position":{"start":{"line":114,"column":37,"offset":4172},"end":{"line":114,"column":84,"offset":4219},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"וגם","position":{"start":{"line":114,"column":85,"offset":4220},"end":{"line":114,"column":88,"offset":4223},"indent":[]}}],"position":{"start":{"line":114,"column":84,"offset":4219},"end":{"line":114,"column":89,"offset":4224},"indent":[]}},{"type":"text","value":" אחרי כל עדכון. (נדבר אחר כך על ","position":{"start":{"line":114,"column":89,"offset":4224},"end":{"line":114,"column":121,"offset":4256},"indent":[]}},{"type":"link","title":null,"url":"#tip-optimizing-performance-by-skipping-effects","children":[{"type":"text","value":"להתאים אישית את זה","position":{"start":{"line":114,"column":122,"offset":4257},"end":{"line":114,"column":140,"offset":4275},"indent":[]}}],"position":{"start":{"line":114,"column":121,"offset":4256},"end":{"line":114,"column":190,"offset":4325},"indent":[]}},{"type":"text","value":".) במקום לחשוב במונחים של “mounting” ו-”עדכון”, יכול להיות שיהיה לך יותר קל לחשוב ש-effects קורים “אחרי רינדור”. ריאקט מבטיח שה-DOM עודכן כאשר זה מריץ את ה- effects.","position":{"start":{"line":114,"column":190,"offset":4325},"end":{"line":114,"column":355,"offset":4490},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4136},"end":{"line":114,"column":355,"offset":4490},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#detailed-explanation","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"הסבר מפורט ","position":{"start":{"line":116,"column":5,"offset":4496},"end":{"line":116,"column":39,"offset":4530},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":4492},"end":{"line":116,"column":39,"offset":4530},"indent":[]},"data":{"id":"detailed-explanation","htmlAttributes":{"id":"detailed-explanation"},"hProperties":{"id":"detailed-explanation"}}},{"type":"paragraph","children":[{"type":"text","value":"עכשיו כשאנו יודעים עוד על effects, השורות הבאות אמורות להיות מובנות:","position":{"start":{"line":118,"column":1,"offset":4532},"end":{"line":118,"column":69,"offset":4600},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":4532},"end":{"line":118,"column":69,"offset":4600},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":120,"column":1,"offset":4602},"end":{"line":128,"column":4,"offset":4746},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"אנו מצהירים על המשתנה state ","position":{"start":{"line":130,"column":1,"offset":4748},"end":{"line":130,"column":29,"offset":4776},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":130,"column":29,"offset":4776},"end":{"line":130,"column":36,"offset":4783},"indent":[]}},{"type":"text","value":", ואז אנו אומרים לריאקט שאנחנו צריכים להשתמש ב- effect. נעביר פונקציה ל- ","position":{"start":{"line":130,"column":36,"offset":4783},"end":{"line":130,"column":109,"offset":4856},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":130,"column":109,"offset":4856},"end":{"line":130,"column":120,"offset":4867},"indent":[]}},{"type":"text","value":". הפונקציה שאנו מעבירים היא ה-effect שלנו. בתוך ה- effect  שלנו, נקבע את כותרת העמוד על ידי שימוש ב- ","position":{"start":{"line":130,"column":120,"offset":4867},"end":{"line":130,"column":221,"offset":4968},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">document.title</code>","position":{"start":{"line":130,"column":221,"offset":4968},"end":{"line":130,"column":237,"offset":4984},"indent":[]}},{"type":"text","value":" שהוא חלק מה-API של הדפדפן. נוכל לקרוא את ה-","position":{"start":{"line":130,"column":237,"offset":4984},"end":{"line":130,"column":281,"offset":5028},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":130,"column":281,"offset":5028},"end":{"line":130,"column":288,"offset":5035},"indent":[]}},{"type":"text","value":" האחרון בתוך ה- effect בגלל שהוא בתוך ה-scope של הפונקציה שלנו. כשריאקט מרנדר את הקומפוננטה שלנו, הוא יזכור את ה- effect שבו השתמשנו, ואז יריץ את ה- effect לאחר שיעדכן את ה-DOM. זה קורה לכל רינדור, כולל הראשון.","position":{"start":{"line":130,"column":288,"offset":5035},"end":{"line":130,"column":498,"offset":5245},"indent":[]}}],"position":{"start":{"line":130,"column":1,"offset":4748},"end":{"line":130,"column":498,"offset":5245},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"מפתחי JavaScript מנוסים אולי ישימו לב שהפונקציה שמועברת ל- ","position":{"start":{"line":132,"column":1,"offset":5247},"end":{"line":132,"column":60,"offset":5306},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":132,"column":60,"offset":5306},"end":{"line":132,"column":71,"offset":5317},"indent":[]}},{"type":"text","value":" הולכת להיות שונה לכל רינדור. זה נעשה בכוונה. למעשה, זה מה שנותן לנו לקרוא את הערך ","position":{"start":{"line":132,"column":71,"offset":5317},"end":{"line":132,"column":154,"offset":5400},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":132,"column":154,"offset":5400},"end":{"line":132,"column":161,"offset":5407},"indent":[]}},{"type":"text","value":" מתוך ה- effect מבלי לדאוג שהוא לא יהיה עדכני. כל זמן שאנו מרנדרים מחדש, אנחנו מתזמנים effect ","position":{"start":{"line":132,"column":161,"offset":5407},"end":{"line":132,"column":255,"offset":5501},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"אחר","position":{"start":{"line":132,"column":256,"offset":5502},"end":{"line":132,"column":259,"offset":5505},"indent":[]}}],"position":{"start":{"line":132,"column":255,"offset":5501},"end":{"line":132,"column":260,"offset":5506},"indent":[]}},{"type":"text","value":", שמחליף את קודמו. במידה מסוימת, זה גורם ל- effects להתנהג יותר כמו חלק מתוצאת הרינדור – כל effect “שייך” לרינדור מסוים. נראה יותר ברור למה זה שימושי ","position":{"start":{"line":132,"column":260,"offset":5506},"end":{"line":132,"column":410,"offset":5656},"indent":[]}},{"type":"link","title":null,"url":"#explanation-why-effects-run-on-each-update","children":[{"type":"text","value":"בהמשך העמוד","position":{"start":{"line":132,"column":411,"offset":5657},"end":{"line":132,"column":422,"offset":5668},"indent":[]}}],"position":{"start":{"line":132,"column":410,"offset":5656},"end":{"line":132,"column":468,"offset":5714},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":132,"column":468,"offset":5714},"end":{"line":132,"column":469,"offset":5715},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":5247},"end":{"line":132,"column":469,"offset":5715},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"טיפ","position":{"start":{"line":134,"column":2,"offset":5718},"end":{"line":134,"column":5,"offset":5721},"indent":[]}}],"position":{"start":{"line":134,"column":2,"offset":5718},"end":{"line":134,"column":5,"offset":5721},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"בניגוד ל- ","position":{"start":{"line":136,"column":2,"offset":5725},"end":{"line":136,"column":12,"offset":5735},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":136,"column":12,"offset":5735},"end":{"line":136,"column":31,"offset":5754},"indent":[]}},{"type":"text","value":" או ","position":{"start":{"line":136,"column":31,"offset":5754},"end":{"line":136,"column":35,"offset":5758},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":136,"column":35,"offset":5758},"end":{"line":136,"column":55,"offset":5778},"indent":[]}},{"type":"text","value":", effects שמתוזמנים עם ","position":{"start":{"line":136,"column":55,"offset":5778},"end":{"line":136,"column":78,"offset":5801},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":136,"column":78,"offset":5801},"end":{"line":136,"column":89,"offset":5812},"indent":[]}},{"type":"text","value":" לא חוסמים את הדפדפן מלעדכן את המסך. זה גורם ליישום שלך להרגיש יותר רספונסיבי. הרוב ה- effects לא צריכים להתקיים באופן סינכרוני. במקרים הנדירים שהם כן מתקיימים בסינכרוניות (כמו מדידת ה- layout), יש ","position":{"start":{"line":136,"column":89,"offset":5812},"end":{"line":136,"column":287,"offset":6010},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-reference.html#uselayouteffect","children":[{"type":"html","value":"<code class=\"gatsby-code-text\">useLayoutEffect</code>","position":{"start":{"line":136,"column":288,"offset":6011},"end":{"line":136,"column":305,"offset":6028},"indent":[]}}],"position":{"start":{"line":136,"column":287,"offset":6010},"end":{"line":136,"column":350,"offset":6073},"indent":[]}},{"type":"text","value":" נפרד עם API מקביל ל- ","position":{"start":{"line":136,"column":350,"offset":6073},"end":{"line":136,"column":372,"offset":6095},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":136,"column":372,"offset":6095},"end":{"line":136,"column":383,"offset":6106},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":136,"column":383,"offset":6106},"end":{"line":136,"column":384,"offset":6107},"indent":[]}}],"position":{"start":{"line":136,"column":2,"offset":5725},"end":{"line":136,"column":384,"offset":6107},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":5717},"end":{"line":136,"column":384,"offset":6107},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#effects-with-cleanup","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Effects עם ניקוי ","position":{"start":{"line":138,"column":4,"offset":6112},"end":{"line":138,"column":44,"offset":6152},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":6109},"end":{"line":138,"column":44,"offset":6152},"indent":[]},"data":{"id":"effects-with-cleanup","htmlAttributes":{"id":"effects-with-cleanup"},"hProperties":{"id":"effects-with-cleanup"}}},{"type":"paragraph","children":[{"type":"text","value":"למרות זאת, ישנם effects שכן דורשים. לדוגמא, ","position":{"start":{"line":140,"column":1,"offset":6154},"end":{"line":140,"column":45,"offset":6198},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"אולי נרצה להגדיר subscription","position":{"start":{"line":140,"column":47,"offset":6200},"end":{"line":140,"column":76,"offset":6229},"indent":[]}}],"position":{"start":{"line":140,"column":45,"offset":6198},"end":{"line":140,"column":78,"offset":6231},"indent":[]}},{"type":"text","value":" למקור מידע חיצוני כלשהו. במקרה זה, זה חשוב לנקות על מנת שלא תהיה דליפת זיכרון! נשווה איך ניתן לעשות זאת עם מחלקות ו- Hooks.","position":{"start":{"line":140,"column":78,"offset":6231},"end":{"line":140,"column":202,"offset":6355},"indent":[]}}],"position":{"start":{"line":140,"column":1,"offset":6154},"end":{"line":140,"column":202,"offset":6355},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-using-classes-1","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"דוגמה עם שימוש במחלקות ","position":{"start":{"line":142,"column":5,"offset":6361},"end":{"line":142,"column":54,"offset":6410},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":6357},"end":{"line":142,"column":54,"offset":6410},"indent":[]},"data":{"id":"example-using-classes-1","htmlAttributes":{"id":"example-using-classes-1"},"hProperties":{"id":"example-using-classes-1"}}},{"type":"paragraph","children":[{"type":"text","value":"במחלקת ריאקט, בדרך כלל מגדירים subscription בתוך ","position":{"start":{"line":144,"column":1,"offset":6412},"end":{"line":144,"column":50,"offset":6461},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":144,"column":50,"offset":6461},"end":{"line":144,"column":69,"offset":6480},"indent":[]}},{"type":"text","value":", ומנקים אותו בתוך ","position":{"start":{"line":144,"column":69,"offset":6480},"end":{"line":144,"column":88,"offset":6499},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":144,"column":88,"offset":6499},"end":{"line":144,"column":110,"offset":6521},"indent":[]}},{"type":"text","value":". לדוגמה, נגיד שיש לנו מודול ","position":{"start":{"line":144,"column":110,"offset":6521},"end":{"line":144,"column":139,"offset":6550},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">ChatAPI</code>","position":{"start":{"line":144,"column":139,"offset":6550},"end":{"line":144,"column":148,"offset":6559},"indent":[]}},{"type":"text","value":" שנותן לנו לעשות subscribe לסטטוס חיבור של חבר אונליין. הנה איך נוכל לעשות subscribe לסטטוס ולהציג אותו על ידי שימוש במחלקה:","position":{"start":{"line":144,"column":148,"offset":6559},"end":{"line":144,"column":272,"offset":6683},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":6412},"end":{"line":144,"column":272,"offset":6683},"indent":[]}},{"type":"html","lang":"jsx{8-26}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatus</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'טוען...'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'מחובר'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'לא מחובר'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":146,"column":1,"offset":6685},"end":{"line":181,"column":4,"offset":7403},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"שים לב איך ","position":{"start":{"line":183,"column":1,"offset":7405},"end":{"line":183,"column":12,"offset":7416},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":183,"column":12,"offset":7416},"end":{"line":183,"column":31,"offset":7435},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":183,"column":31,"offset":7435},"end":{"line":183,"column":35,"offset":7439},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":183,"column":35,"offset":7439},"end":{"line":183,"column":57,"offset":7461},"indent":[]}},{"type":"text","value":" צריכים לשקף אחד את השני. מתודות מחזור חיים מכריחות אותנו לפצל את הלוגיקה למרות שבאופן מושגי הקוד בשניהם קשור לאותו effect.","position":{"start":{"line":183,"column":57,"offset":7461},"end":{"line":183,"column":180,"offset":7584},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":7405},"end":{"line":183,"column":180,"offset":7584},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"הערה","position":{"start":{"line":185,"column":2,"offset":7587},"end":{"line":185,"column":6,"offset":7591},"indent":[]}}],"position":{"start":{"line":185,"column":2,"offset":7587},"end":{"line":185,"column":6,"offset":7591},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"קוראים חדי-עין ישימו לב שדוגמה זאת צריכה בנוסף מתודת ","position":{"start":{"line":187,"column":2,"offset":7595},"end":{"line":187,"column":55,"offset":7648},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":187,"column":55,"offset":7648},"end":{"line":187,"column":75,"offset":7668},"indent":[]}},{"type":"text","value":" כדי להיות נכונה לחלוטין. נתעלם מכך אבל נחזור לזה ","position":{"start":{"line":187,"column":75,"offset":7668},"end":{"line":187,"column":125,"offset":7718},"indent":[]}},{"type":"link","title":null,"url":"#explanation-why-effects-run-on-each-update","children":[{"type":"text","value":"בחלק אחר","position":{"start":{"line":187,"column":126,"offset":7719},"end":{"line":187,"column":134,"offset":7727},"indent":[]}}],"position":{"start":{"line":187,"column":125,"offset":7718},"end":{"line":187,"column":180,"offset":7773},"indent":[]}},{"type":"text","value":" של העמוד.","position":{"start":{"line":187,"column":180,"offset":7773},"end":{"line":187,"column":190,"offset":7783},"indent":[]}}],"position":{"start":{"line":187,"column":2,"offset":7595},"end":{"line":187,"column":190,"offset":7783},"indent":[]}}],"position":{"start":{"line":185,"column":1,"offset":7586},"end":{"line":187,"column":190,"offset":7783},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-using-hooks-1","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"דוגמה עם שימוש ב- Hooks ","position":{"start":{"line":189,"column":5,"offset":7789},"end":{"line":189,"column":53,"offset":7837},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":7785},"end":{"line":189,"column":53,"offset":7837},"indent":[]},"data":{"id":"example-using-hooks-1","htmlAttributes":{"id":"example-using-hooks-1"},"hProperties":{"id":"example-using-hooks-1"}}},{"type":"paragraph","children":[{"type":"text","value":"הבה נראה איך נוכל לכתוב את קומפוננטה זו בשימוש של Hooks.","position":{"start":{"line":191,"column":1,"offset":7839},"end":{"line":191,"column":57,"offset":7895},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":7839},"end":{"line":191,"column":57,"offset":7895},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"יכול להיות שאתה חושב שנצטרך effect נפרד על מנת לבצע את הניקוי. אולם קוד שמיועד להוספה ולהסרה של subscription כל כך קשור ש- ","position":{"start":{"line":193,"column":1,"offset":7897},"end":{"line":193,"column":124,"offset":8020},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":193,"column":124,"offset":8020},"end":{"line":193,"column":135,"offset":8031},"indent":[]}},{"type":"text","value":" מתוכנן להשאיר אותו ביחד. אם ה-effect שלך מחזיר פונקציה, ריאקט יריץ אותה כשיגיע הזמן לנקות:","position":{"start":{"line":193,"column":135,"offset":8031},"end":{"line":193,"column":226,"offset":8122},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":7897},"end":{"line":193,"column":226,"offset":8122},"indent":[]}},{"type":"html","lang":"jsx{6-16}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// ציין איך לנקות אחרי ה-effect:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">cleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'טוען...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'מחובר'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'לא מחובר'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":195,"column":1,"offset":8124},"end":{"line":218,"column":4,"offset":8713},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"מדוע החזרנו פונקציה מה- effect שלנו?","position":{"start":{"line":220,"column":3,"offset":8717},"end":{"line":220,"column":39,"offset":8753},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":8715},"end":{"line":220,"column":41,"offset":8755},"indent":[]}},{"type":"text","value":" זה מנגנון ניקוי אופציונאלי ל- effects. כל effect יכול להחזיר פונקציה שמנקה אחריה. זה נותן לנו להשאיר את הלוגיקות להוספה והסרה של subscriptions קרובות אחת לשניה. הן חלק מאותו effect!","position":{"start":{"line":220,"column":41,"offset":8755},"end":{"line":220,"column":223,"offset":8937},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":8715},"end":{"line":220,"column":223,"offset":8937},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"מתי בדיוק ריאקט מנקה אחרי effect?","position":{"start":{"line":222,"column":3,"offset":8941},"end":{"line":222,"column":36,"offset":8974},"indent":[]}}],"position":{"start":{"line":222,"column":1,"offset":8939},"end":{"line":222,"column":38,"offset":8976},"indent":[]}},{"type":"text","value":" ריאקט מבצעת את הניקיון בזמן unmounting של קומפוננטה. למרות זאת, כפי שלמדנו קודם, effects רצים אחרי כל רינדור ולא רק פעם אחת. זאת הסיבה שריאקט מנקה ","position":{"start":{"line":222,"column":38,"offset":8976},"end":{"line":222,"column":186,"offset":9124},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"גם","position":{"start":{"line":222,"column":187,"offset":9125},"end":{"line":222,"column":189,"offset":9127},"indent":[]}}],"position":{"start":{"line":222,"column":186,"offset":9124},"end":{"line":222,"column":190,"offset":9128},"indent":[]}},{"type":"text","value":" effects מרינדורים קודמים לפני הרצת effects בפעם הבאה. נדבר על ","position":{"start":{"line":222,"column":190,"offset":9128},"end":{"line":222,"column":253,"offset":9191},"indent":[]}},{"type":"link","title":null,"url":"#explanation-why-effects-run-on-each-update","children":[{"type":"text","value":"למה זה עוזר לנו להימנע מבאגים","position":{"start":{"line":222,"column":254,"offset":9192},"end":{"line":222,"column":283,"offset":9221},"indent":[]}}],"position":{"start":{"line":222,"column":253,"offset":9191},"end":{"line":222,"column":329,"offset":9267},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":222,"column":329,"offset":9267},"end":{"line":222,"column":330,"offset":9268},"indent":[]}},{"type":"link","title":null,"url":"#tip-optimizing-performance-by-skipping-effects","children":[{"type":"text","value":"וגם איך להימנע מהתנהגות זו במקרה וזה יוצר בעיות מבחינת ביצועים.","position":{"start":{"line":222,"column":331,"offset":9269},"end":{"line":222,"column":394,"offset":9332},"indent":[]}}],"position":{"start":{"line":222,"column":330,"offset":9268},"end":{"line":222,"column":444,"offset":9382},"indent":[]}},{"type":"text","value":" בהמשך.","position":{"start":{"line":222,"column":444,"offset":9382},"end":{"line":222,"column":451,"offset":9389},"indent":[]}}],"position":{"start":{"line":222,"column":1,"offset":8939},"end":{"line":222,"column":451,"offset":9389},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"הערה","position":{"start":{"line":224,"column":2,"offset":9392},"end":{"line":224,"column":6,"offset":9396},"indent":[]}}],"position":{"start":{"line":224,"column":2,"offset":9392},"end":{"line":224,"column":6,"offset":9396},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אנו לא צריכים להחזיר פונקציה עם שם מ- effect זה. קראנו לה ","position":{"start":{"line":226,"column":2,"offset":9400},"end":{"line":226,"column":60,"offset":9458},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">cleanup</code>","position":{"start":{"line":226,"column":60,"offset":9458},"end":{"line":226,"column":69,"offset":9467},"indent":[]}},{"type":"text","value":" פה כדי להבהיר את מטרתה, אך תוכל להחזיר arrow function או לקרוא לה בשם אחר.","position":{"start":{"line":226,"column":69,"offset":9467},"end":{"line":226,"column":144,"offset":9542},"indent":[]}}],"position":{"start":{"line":226,"column":2,"offset":9400},"end":{"line":226,"column":144,"offset":9542},"indent":[]}}],"position":{"start":{"line":224,"column":1,"offset":9391},"end":{"line":226,"column":144,"offset":9542},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#recap","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"סיכום ","position":{"start":{"line":228,"column":4,"offset":9547},"end":{"line":228,"column":18,"offset":9561},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":9544},"end":{"line":228,"column":18,"offset":9561},"indent":[]},"data":{"id":"recap","htmlAttributes":{"id":"recap"},"hProperties":{"id":"recap"}}},{"type":"paragraph","children":[{"type":"text","value":"למדנו ש- ","position":{"start":{"line":230,"column":1,"offset":9563},"end":{"line":230,"column":10,"offset":9572},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":230,"column":10,"offset":9572},"end":{"line":230,"column":21,"offset":9583},"indent":[]}},{"type":"text","value":" נותן לנו להביע סוגים שונים של תופעות לוואי לאחר רינדור קומפוננטה. בגלל ש- effects מסוימים דורשים ניקיון הם מחזירים פונקציה:","position":{"start":{"line":230,"column":21,"offset":9583},"end":{"line":230,"column":145,"offset":9707},"indent":[]}}],"position":{"start":{"line":230,"column":1,"offset":9563},"end":{"line":230,"column":145,"offset":9707},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":232,"column":1,"offset":9709},"end":{"line":243,"column":4,"offset":10009},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Effects אחרים לא ידרשו שלב ניקיון, מכאן שלא יחזירו כלום.","position":{"start":{"line":245,"column":1,"offset":10011},"end":{"line":245,"column":57,"offset":10067},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":10011},"end":{"line":245,"column":57,"offset":10067},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":247,"column":1,"offset":10069},"end":{"line":251,"column":4,"offset":10148},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"ה-Effect Hook מאחד בו את שני מקרי השימוש ב- API אחד.","position":{"start":{"line":253,"column":1,"offset":10150},"end":{"line":253,"column":53,"offset":10202},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":10150},"end":{"line":253,"column":53,"offset":10202},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":255,"column":1,"offset":10204},"end":{"line":255,"column":14,"offset":10217},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"אם אתה מרגיש מרגיש שיש לך תפיסה טובה של איך Effect Hook עובד, או אם אתה מרגיש שזה יותר מדי מידע, תוכל לעבור ","position":{"start":{"line":257,"column":3,"offset":10221},"end":{"line":257,"column":111,"offset":10329},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-rules.html","children":[{"type":"text","value":"לעמוד הבא שמדבר על חוקי Hooks","position":{"start":{"line":257,"column":112,"offset":10330},"end":{"line":257,"column":141,"offset":10359},"indent":[]}}],"position":{"start":{"line":257,"column":111,"offset":10329},"end":{"line":257,"column":166,"offset":10384},"indent":[]}},{"type":"text","value":" עכשיו.","position":{"start":{"line":257,"column":166,"offset":10384},"end":{"line":257,"column":173,"offset":10391},"indent":[]}}],"position":{"start":{"line":257,"column":1,"offset":10219},"end":{"line":257,"column":175,"offset":10393},"indent":[]}}],"position":{"start":{"line":257,"column":1,"offset":10219},"end":{"line":257,"column":175,"offset":10393},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":259,"column":1,"offset":10395},"end":{"line":259,"column":14,"offset":10408},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#tips-for-using-effects","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"טיפים לשימוש ב- Effects ","position":{"start":{"line":261,"column":4,"offset":10413},"end":{"line":261,"column":53,"offset":10462},"indent":[]}}],"position":{"start":{"line":261,"column":1,"offset":10410},"end":{"line":261,"column":53,"offset":10462},"indent":[]},"data":{"id":"tips-for-using-effects","htmlAttributes":{"id":"tips-for-using-effects"},"hProperties":{"id":"tips-for-using-effects"}}},{"type":"paragraph","children":[{"type":"text","value":"נמשיך את עמוד זה עם מבט מעמיק על כמה מההיבטים של ","position":{"start":{"line":263,"column":1,"offset":10464},"end":{"line":263,"column":50,"offset":10513},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":263,"column":50,"offset":10513},"end":{"line":263,"column":61,"offset":10524},"indent":[]}},{"type":"text","value":" שיכולים לעניין משתמשי ריאקט מנוסים. אין חובה להעמיק בהם עכשיו. תוכל תמיד לחזור לעמוד זה על מנת ללמוד עוד פרטים על Effect Hook.","position":{"start":{"line":263,"column":61,"offset":10524},"end":{"line":263,"column":188,"offset":10651},"indent":[]}}],"position":{"start":{"line":263,"column":1,"offset":10464},"end":{"line":263,"column":188,"offset":10651},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#tip-use-multiple-effects-to-separate-concerns","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"טיפ: השתמש במספר effects לבעיות נפרדות ","position":{"start":{"line":265,"column":5,"offset":10657},"end":{"line":265,"column":92,"offset":10744},"indent":[]}}],"position":{"start":{"line":265,"column":1,"offset":10653},"end":{"line":265,"column":92,"offset":10744},"indent":[]},"data":{"id":"tip-use-multiple-effects-to-separate-concerns","htmlAttributes":{"id":"tip-use-multiple-effects-to-separate-concerns"},"hProperties":{"id":"tip-use-multiple-effects-to-separate-concerns"}}},{"type":"paragraph","children":[{"type":"text","value":"אחת מהבעיות שפירטנו עליה ","position":{"start":{"line":267,"column":1,"offset":10746},"end":{"line":267,"column":26,"offset":10771},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-intro.html#complex-components-become-hard-to-understand","children":[{"type":"text","value":"במוטיבציה","position":{"start":{"line":267,"column":27,"offset":10772},"end":{"line":267,"column":36,"offset":10781},"indent":[]}}],"position":{"start":{"line":267,"column":26,"offset":10771},"end":{"line":267,"column":106,"offset":10851},"indent":[]}},{"type":"text","value":" ל- Hooks היא שמחלקות מתודות מחזור חיים מכילות לוגיקה לא קשורה, אך לוגיקה קשורה מפוצלת לכמה מתודות. הנה קומפוננטה שמחברת את לוגיקת ה-counter ודוגמת בדיקת הסטטוס חבר אונליין מהדוגמאות הקודמות:","position":{"start":{"line":267,"column":106,"offset":10851},"end":{"line":267,"column":297,"offset":11042},"indent":[]}}],"position":{"start":{"line":267,"column":1,"offset":10746},"end":{"line":267,"column":297,"offset":11042},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatusWithCounter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>","position":{"start":{"line":269,"column":1,"offset":11044},"end":{"line":302,"column":4,"offset":11781},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"שים לב איך הלוגיקה שמגדירה את ","position":{"start":{"line":304,"column":1,"offset":11783},"end":{"line":304,"column":31,"offset":11813},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">document.title</code>","position":{"start":{"line":304,"column":31,"offset":11813},"end":{"line":304,"column":47,"offset":11829},"indent":[]}},{"type":"text","value":" מפוצלת בין ","position":{"start":{"line":304,"column":47,"offset":11829},"end":{"line":304,"column":59,"offset":11841},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":304,"column":59,"offset":11841},"end":{"line":304,"column":78,"offset":11860},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":304,"column":78,"offset":11860},"end":{"line":304,"column":82,"offset":11864},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":304,"column":82,"offset":11864},"end":{"line":304,"column":102,"offset":11884},"indent":[]}},{"type":"text","value":". לוגיקת הסטטוס גם היא מפוצלת בין ","position":{"start":{"line":304,"column":102,"offset":11884},"end":{"line":304,"column":136,"offset":11918},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":304,"column":136,"offset":11918},"end":{"line":304,"column":155,"offset":11937},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":304,"column":155,"offset":11937},"end":{"line":304,"column":159,"offset":11941},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":304,"column":159,"offset":11941},"end":{"line":304,"column":181,"offset":11963},"indent":[]}},{"type":"text","value":". ו- ","position":{"start":{"line":304,"column":181,"offset":11963},"end":{"line":304,"column":186,"offset":11968},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":304,"column":186,"offset":11968},"end":{"line":304,"column":205,"offset":11987},"indent":[]}},{"type":"text","value":" מכילה קוד לשתי המטלות.","position":{"start":{"line":304,"column":205,"offset":11987},"end":{"line":304,"column":228,"offset":12010},"indent":[]}}],"position":{"start":{"line":304,"column":1,"offset":11783},"end":{"line":304,"column":228,"offset":12010},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אז, איך Hooks פותרים את בעיה זו? כמו ","position":{"start":{"line":306,"column":1,"offset":12012},"end":{"line":306,"column":38,"offset":12049},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-state.html#tip-using-multiple-state-variables","children":[{"type":"text","value":"שניתן להשתמש ב- ","position":{"start":{"line":306,"column":39,"offset":12050},"end":{"line":306,"column":55,"offset":12066},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"State","position":{"start":{"line":306,"column":56,"offset":12067},"end":{"line":306,"column":61,"offset":12072},"indent":[]}}],"position":{"start":{"line":306,"column":55,"offset":12066},"end":{"line":306,"column":62,"offset":12073},"indent":[]}},{"type":"text","value":" Hook יותר מפעם אחת","position":{"start":{"line":306,"column":62,"offset":12073},"end":{"line":306,"column":81,"offset":12092},"indent":[]}}],"position":{"start":{"line":306,"column":38,"offset":12049},"end":{"line":306,"column":141,"offset":12152},"indent":[]}},{"type":"text","value":", ניתן להשתמש במספר effects. זה נותן לנו לפצל לוגיקה לא קשורה ל- effects שונים:","position":{"start":{"line":306,"column":141,"offset":12152},"end":{"line":306,"column":220,"offset":12231},"indent":[]}}],"position":{"start":{"line":306,"column":1,"offset":12012},"end":{"line":306,"column":220,"offset":12231},"indent":[]}},{"type":"html","lang":"jsx{3,8}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatusWithCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":308,"column":1,"offset":12233},"end":{"line":328,"column":4,"offset":12753},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Hooks נותנים לנו לפצל קוד בהתבסס על מה שהוא עושה","position":{"start":{"line":330,"column":3,"offset":12757},"end":{"line":330,"column":51,"offset":12805},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":12755},"end":{"line":330,"column":53,"offset":12807},"indent":[]}},{"type":"text","value":" ולא בהתבסס על שם מתודת מחזור חיים. ריאקט יחיל ","position":{"start":{"line":330,"column":53,"offset":12807},"end":{"line":330,"column":100,"offset":12854},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"כל","position":{"start":{"line":330,"column":101,"offset":12855},"end":{"line":330,"column":103,"offset":12857},"indent":[]}}],"position":{"start":{"line":330,"column":100,"offset":12854},"end":{"line":330,"column":104,"offset":12858},"indent":[]}},{"type":"text","value":" effect שמשומש על ידי הקומפוננטה, בסדר שהן צוינו.","position":{"start":{"line":330,"column":104,"offset":12858},"end":{"line":330,"column":153,"offset":12907},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":12755},"end":{"line":330,"column":153,"offset":12907},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#explanation-why-effects-run-on-each-update","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"הסבר: למה effects רצים על כל עדכון ","position":{"start":{"line":332,"column":5,"offset":12913},"end":{"line":332,"column":85,"offset":12993},"indent":[]}}],"position":{"start":{"line":332,"column":1,"offset":12909},"end":{"line":332,"column":85,"offset":12993},"indent":[]},"data":{"id":"explanation-why-effects-run-on-each-update","htmlAttributes":{"id":"explanation-why-effects-run-on-each-update"},"hProperties":{"id":"explanation-why-effects-run-on-each-update"}}},{"type":"paragraph","children":[{"type":"text","value":"אם אתה רגיל למחלקות, יכול להיות שאתה תוהה למה שלב ניקוי ה-effect קורה לאחר כל רינדור מחדש, ולא רק פעם אחת בזמן unmounting. הבא נראה דוגמה פרקטית שמסבירה למה תכנון זה עוזר לנו ליצור קומפוננטות עם פחות באגים.","position":{"start":{"line":334,"column":1,"offset":12995},"end":{"line":334,"column":207,"offset":13201},"indent":[]}}],"position":{"start":{"line":334,"column":1,"offset":12995},"end":{"line":334,"column":207,"offset":13201},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"#example-using-classes-1","children":[{"type":"text","value":"מוקדם יותר בעמוד זה","position":{"start":{"line":336,"column":2,"offset":13204},"end":{"line":336,"column":21,"offset":13223},"indent":[]}}],"position":{"start":{"line":336,"column":1,"offset":13203},"end":{"line":336,"column":48,"offset":13250},"indent":[]}},{"type":"text","value":", הצגנו את הקומפוננטה ","position":{"start":{"line":336,"column":48,"offset":13250},"end":{"line":336,"column":70,"offset":13272},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">FriendStatus</code>","position":{"start":{"line":336,"column":70,"offset":13272},"end":{"line":336,"column":84,"offset":13286},"indent":[]}},{"type":"text","value":" שמציגה האם חבר מחובר או לא. המחלקה שלנו קוראת את ","position":{"start":{"line":336,"column":84,"offset":13286},"end":{"line":336,"column":134,"offset":13336},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">friend.id</code>","position":{"start":{"line":336,"column":134,"offset":13336},"end":{"line":336,"column":145,"offset":13347},"indent":[]}},{"type":"text","value":" מ- ","position":{"start":{"line":336,"column":145,"offset":13347},"end":{"line":336,"column":149,"offset":13351},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.props</code>","position":{"start":{"line":336,"column":149,"offset":13351},"end":{"line":336,"column":161,"offset":13363},"indent":[]}},{"type":"text","value":", מתחברת לסטטוס החבר לאחר ה-mounting של הקומפוננטה, ומתנתקת בזמן unmounting:","position":{"start":{"line":336,"column":161,"offset":13363},"end":{"line":336,"column":237,"offset":13439},"indent":[]}}],"position":{"start":{"line":336,"column":1,"offset":13203},"end":{"line":336,"column":237,"offset":13439},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":338,"column":1,"offset":13441},"end":{"line":352,"column":4,"offset":13718},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"אבל מה קורה אם ה- friend prop משתנה","position":{"start":{"line":354,"column":3,"offset":13722},"end":{"line":354,"column":38,"offset":13757},"indent":[]}}],"position":{"start":{"line":354,"column":1,"offset":13720},"end":{"line":354,"column":40,"offset":13759},"indent":[]}},{"type":"text","value":" בזמן שהקומפוננטה על המסך? הקומפוננטה שלנו תמשיך להציג את הסטטוס של חבר אחר. זה באג. נגרום גם לדליפת זיכרון או קריסה בזמן unmounting בגלל שקריאת ההתנתקות תשתמש ב- id השגוי של החבר.","position":{"start":{"line":354,"column":40,"offset":13759},"end":{"line":354,"column":220,"offset":13939},"indent":[]}}],"position":{"start":{"line":354,"column":1,"offset":13720},"end":{"line":354,"column":220,"offset":13939},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"בקומפוננטת מחלקה, נצטרך גם להוסיף ","position":{"start":{"line":356,"column":1,"offset":13941},"end":{"line":356,"column":35,"offset":13975},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":356,"column":35,"offset":13975},"end":{"line":356,"column":55,"offset":13995},"indent":[]}},{"type":"text","value":" לטפל במקרה זה:","position":{"start":{"line":356,"column":55,"offset":13995},"end":{"line":356,"column":70,"offset":14010},"indent":[]}}],"position":{"start":{"line":356,"column":1,"offset":13941},"end":{"line":356,"column":70,"offset":14010},"indent":[]}},{"type":"html","lang":"jsx{8-19}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// התנתק מה- friend.id הקודם</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      prevProps<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// התחבר ל- friend.id הבא</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":358,"column":1,"offset":14012},"end":{"line":385,"column":4,"offset":14604},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"מקור נפוץ של באגים הוא מפתחים ששוכחים לטפל ב- ","position":{"start":{"line":387,"column":1,"offset":14606},"end":{"line":387,"column":47,"offset":14652},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":387,"column":47,"offset":14652},"end":{"line":387,"column":67,"offset":14672},"indent":[]}},{"type":"text","value":" ביישומי ריאקט.","position":{"start":{"line":387,"column":67,"offset":14672},"end":{"line":387,"column":82,"offset":14687},"indent":[]}}],"position":{"start":{"line":387,"column":1,"offset":14606},"end":{"line":387,"column":82,"offset":14687},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"עכשיו נשקול את הגרסה הזו של הקומפוננטה שמשתמשת ב- Hooks:","position":{"start":{"line":389,"column":1,"offset":14689},"end":{"line":389,"column":57,"offset":14745},"indent":[]}}],"position":{"start":{"line":389,"column":1,"offset":14689},"end":{"line":389,"column":57,"offset":14745},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":391,"column":1,"offset":14747},"end":{"line":401,"column":4,"offset":15013},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"היא לא סובלת מבאג זה. ( אבל לא שינינו אותה גם.)","position":{"start":{"line":403,"column":1,"offset":15015},"end":{"line":403,"column":48,"offset":15062},"indent":[]}}],"position":{"start":{"line":403,"column":1,"offset":15015},"end":{"line":403,"column":48,"offset":15062},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אין קוד מיוחד לטיפול בעדכונים בגלל ש- ","position":{"start":{"line":405,"column":1,"offset":15064},"end":{"line":405,"column":39,"offset":15102},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":405,"column":39,"offset":15102},"end":{"line":405,"column":50,"offset":15113},"indent":[]}},{"type":"text","value":" מטפלת בהם ","position":{"start":{"line":405,"column":50,"offset":15113},"end":{"line":405,"column":61,"offset":15124},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"כברירת מחדל","position":{"start":{"line":405,"column":62,"offset":15125},"end":{"line":405,"column":73,"offset":15136},"indent":[]}}],"position":{"start":{"line":405,"column":61,"offset":15124},"end":{"line":405,"column":74,"offset":15137},"indent":[]}},{"type":"text","value":". היא מנקה את ה-effects הקודמים לפני השמת ה-effects הבאים. על מנת להדגים זאת, הנה רצף של קריאות התחברות והתנתקות שהקומפוננטה יכולה ליצר לאורך זמן:","position":{"start":{"line":405,"column":74,"offset":15137},"end":{"line":405,"column":220,"offset":15283},"indent":[]}}],"position":{"start":{"line":405,"column":1,"offset":15064},"end":{"line":405,"column":220,"offset":15283},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Mount עם { friend: { id: 100 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// הרצת effect ראשון</span>\n\n<span class=\"token comment\">// עדכון עם { friend: { id: 200 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ניקוי effect קודם</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// הרצת ה-effect הבא</span>\n\n<span class=\"token comment\">// עדכון עם { friend: { id: 300 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ניקוי effect קודם</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// הרצת ה-effect הבא</span>\n\n<span class=\"token comment\">// Unmount</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ניקוי ה- effect האחרון</span></code></pre></div>","position":{"start":{"line":407,"column":1,"offset":15285},"end":{"line":421,"column":4,"offset":15937},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"התנהגות זאת מבטיחה עקביות כברירת מחדל ומונעת באגים נפוצים בקומפוננטות מחלקה בגלל לוגיקת עדכון חסרה.","position":{"start":{"line":423,"column":1,"offset":15939},"end":{"line":423,"column":100,"offset":16038},"indent":[]}}],"position":{"start":{"line":423,"column":1,"offset":15939},"end":{"line":423,"column":100,"offset":16038},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#tip-optimizing-performance-by-skipping-effects","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"טיפ: מיטוב ביצועים על ידי דילוג על effects ","position":{"start":{"line":425,"column":5,"offset":16044},"end":{"line":425,"column":97,"offset":16136},"indent":[]}}],"position":{"start":{"line":425,"column":1,"offset":16040},"end":{"line":425,"column":97,"offset":16136},"indent":[]},"data":{"id":"tip-optimizing-performance-by-skipping-effects","htmlAttributes":{"id":"tip-optimizing-performance-by-skipping-effects"},"hProperties":{"id":"tip-optimizing-performance-by-skipping-effects"}}},{"type":"paragraph","children":[{"type":"text","value":"במקרים מסוימים, ניקיון או השמת effect לאחר כל רינדור יכולה ליצור בעיות ביצועים. בקומפוננטות מחלקה, נוכל לפתור בעיה זו על ידי כתיבה של השוואה נוספת עם ","position":{"start":{"line":427,"column":1,"offset":16138},"end":{"line":427,"column":151,"offset":16288},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">prevProps</code>","position":{"start":{"line":427,"column":151,"offset":16288},"end":{"line":427,"column":162,"offset":16299},"indent":[]}},{"type":"text","value":" או ","position":{"start":{"line":427,"column":162,"offset":16299},"end":{"line":427,"column":166,"offset":16303},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">prevState</code>","position":{"start":{"line":427,"column":166,"offset":16303},"end":{"line":427,"column":177,"offset":16314},"indent":[]}},{"type":"text","value":" בתוך ","position":{"start":{"line":427,"column":177,"offset":16314},"end":{"line":427,"column":183,"offset":16320},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":427,"column":183,"offset":16320},"end":{"line":427,"column":203,"offset":16340},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":427,"column":203,"offset":16340},"end":{"line":427,"column":204,"offset":16341},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":16138},"end":{"line":427,"column":204,"offset":16341},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevState<span class=\"token punctuation\">.</span>count <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":429,"column":1,"offset":16343},"end":{"line":435,"column":4,"offset":16502},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"דרישה זו היא נפוצה מספיק שהיא כבר בנויה לתוך ","position":{"start":{"line":437,"column":1,"offset":16504},"end":{"line":437,"column":46,"offset":16549},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":437,"column":46,"offset":16549},"end":{"line":437,"column":57,"offset":16560},"indent":[]}},{"type":"text","value":". אתה יכול לומר לריאקט ","position":{"start":{"line":437,"column":57,"offset":16560},"end":{"line":437,"column":80,"offset":16583},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"לדלג","position":{"start":{"line":437,"column":81,"offset":16584},"end":{"line":437,"column":85,"offset":16588},"indent":[]}}],"position":{"start":{"line":437,"column":80,"offset":16583},"end":{"line":437,"column":86,"offset":16589},"indent":[]}},{"type":"text","value":" על השמת effect אם ערכים מסוימים לא השתנו בין רינדורים. על מנת לעשות זאת, העבר מערך כארגומנט שני אופציונאלי ל- ","position":{"start":{"line":437,"column":86,"offset":16589},"end":{"line":437,"column":197,"offset":16700},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":437,"column":197,"offset":16700},"end":{"line":437,"column":208,"offset":16711},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":437,"column":208,"offset":16711},"end":{"line":437,"column":209,"offset":16712},"indent":[]}}],"position":{"start":{"line":437,"column":1,"offset":16504},"end":{"line":437,"column":209,"offset":16712},"indent":[]}},{"type":"html","lang":"jsx{3}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">לחצת </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> פעמים</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// הרץ מחדש את ה-effect אם count משתנה</span></span></code></pre></div>","position":{"start":{"line":439,"column":1,"offset":16714},"end":{"line":443,"column":4,"offset":16838},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"בדוגמה לעיל, אנו מעבירים ","position":{"start":{"line":445,"column":1,"offset":16840},"end":{"line":445,"column":26,"offset":16865},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[count]</code>","position":{"start":{"line":445,"column":26,"offset":16865},"end":{"line":445,"column":35,"offset":16874},"indent":[]}},{"type":"text","value":" כארגומנט שני. מה זה אומר? אם ","position":{"start":{"line":445,"column":35,"offset":16874},"end":{"line":445,"column":65,"offset":16904},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":445,"column":65,"offset":16904},"end":{"line":445,"column":72,"offset":16911},"indent":[]}},{"type":"text","value":" שווה ל- ","position":{"start":{"line":445,"column":72,"offset":16911},"end":{"line":445,"column":81,"offset":16920},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">5</code>","position":{"start":{"line":445,"column":81,"offset":16920},"end":{"line":445,"column":84,"offset":16923},"indent":[]}},{"type":"text","value":", ואז הקומפוננטה שלנו מתרנדרת מחדש עם ","position":{"start":{"line":445,"column":84,"offset":16923},"end":{"line":445,"column":122,"offset":16961},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":445,"column":122,"offset":16961},"end":{"line":445,"column":129,"offset":16968},"indent":[]}},{"type":"text","value":" שעדיין שווה ל- ","position":{"start":{"line":445,"column":129,"offset":16968},"end":{"line":445,"column":145,"offset":16984},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">5</code>","position":{"start":{"line":445,"column":145,"offset":16984},"end":{"line":445,"column":148,"offset":16987},"indent":[]}},{"type":"text","value":", ריאקט תשווה את ","position":{"start":{"line":445,"column":148,"offset":16987},"end":{"line":445,"column":165,"offset":17004},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[5]</code>","position":{"start":{"line":445,"column":165,"offset":17004},"end":{"line":445,"column":170,"offset":17009},"indent":[]}},{"type":"text","value":" מהרינדור הקודם ו- ","position":{"start":{"line":445,"column":170,"offset":17009},"end":{"line":445,"column":189,"offset":17028},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[5]</code>","position":{"start":{"line":445,"column":189,"offset":17028},"end":{"line":445,"column":194,"offset":17033},"indent":[]}},{"type":"text","value":" מהרינדור הבא. בגלל שכל הערכים במערך הם אותו ","position":{"start":{"line":445,"column":194,"offset":17033},"end":{"line":445,"column":239,"offset":17078},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">(5 === 5)</code>","position":{"start":{"line":445,"column":239,"offset":17078},"end":{"line":445,"column":250,"offset":17089},"indent":[]}},{"type":"text","value":", ריאקט ידלג על ה-effect. זוהי האופטימיזציה שלנו.","position":{"start":{"line":445,"column":250,"offset":17089},"end":{"line":445,"column":299,"offset":17138},"indent":[]}}],"position":{"start":{"line":445,"column":1,"offset":16840},"end":{"line":445,"column":299,"offset":17138},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"כשאנו מרנדרים עם ","position":{"start":{"line":447,"column":1,"offset":17140},"end":{"line":447,"column":18,"offset":17157},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">count</code>","position":{"start":{"line":447,"column":18,"offset":17157},"end":{"line":447,"column":25,"offset":17164},"indent":[]}},{"type":"text","value":" שמעודכן ל- ","position":{"start":{"line":447,"column":25,"offset":17164},"end":{"line":447,"column":37,"offset":17176},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">6</code>","position":{"start":{"line":447,"column":37,"offset":17176},"end":{"line":447,"column":40,"offset":17179},"indent":[]}},{"type":"text","value":", ריאקט תשווה את הערכים בתוך מערך ה- ","position":{"start":{"line":447,"column":40,"offset":17179},"end":{"line":447,"column":77,"offset":17216},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[5]</code>","position":{"start":{"line":447,"column":77,"offset":17216},"end":{"line":447,"column":82,"offset":17221},"indent":[]}},{"type":"text","value":" מהרינדור הקודם לערכים במערך ה- ","position":{"start":{"line":447,"column":82,"offset":17221},"end":{"line":447,"column":114,"offset":17253},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[6]</code>","position":{"start":{"line":447,"column":114,"offset":17253},"end":{"line":447,"column":119,"offset":17258},"indent":[]}},{"type":"text","value":" ברינדור הבא. בפעם הזו, ריאקט יישם מחדש את ה-effect בגלל ש- ","position":{"start":{"line":447,"column":119,"offset":17258},"end":{"line":447,"column":179,"offset":17318},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">5 !== 6</code>","position":{"start":{"line":447,"column":179,"offset":17318},"end":{"line":447,"column":188,"offset":17327},"indent":[]}},{"type":"text","value":". אם ישנם ערכים נוספים במערך, ריאקט יריץ את ה-effect מחדש גם אם אחד מהם שונה.","position":{"start":{"line":447,"column":188,"offset":17327},"end":{"line":447,"column":265,"offset":17404},"indent":[]}}],"position":{"start":{"line":447,"column":1,"offset":17140},"end":{"line":447,"column":265,"offset":17404},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"זה גם עובד על effects בעלי שלב ניקיון:","position":{"start":{"line":449,"column":1,"offset":17406},"end":{"line":449,"column":39,"offset":17444},"indent":[]}}],"position":{"start":{"line":449,"column":1,"offset":17406},"end":{"line":449,"column":39,"offset":17444},"indent":[]}},{"type":"html","lang":"jsx{10}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// התחבר מחדש רק אם props.friend.id משתנה</span></span></code></pre></div>","position":{"start":{"line":451,"column":1,"offset":17446},"end":{"line":462,"column":4,"offset":17793},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"בעתיד, יכול להיות שהארגומנט השני יוסף אוטומטית על ידי טרנספורמציה בזמן בנייה. ( build-time).","position":{"start":{"line":464,"column":1,"offset":17795},"end":{"line":464,"column":93,"offset":17887},"indent":[]}}],"position":{"start":{"line":464,"column":1,"offset":17795},"end":{"line":464,"column":93,"offset":17887},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"הערה","position":{"start":{"line":466,"column":2,"offset":17890},"end":{"line":466,"column":6,"offset":17894},"indent":[]}}],"position":{"start":{"line":466,"column":2,"offset":17890},"end":{"line":466,"column":6,"offset":17894},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אם אתה משתמש באופטימיזציה זו, ודא שהמערך מכיל ","position":{"start":{"line":468,"column":2,"offset":17898},"end":{"line":468,"column":48,"offset":17944},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"את כל הערכים מה- scope של הקומפוננטה (כמו props ו- state) שמשתנים לאורך זמן ומשומשים על ידי ה- effect.","position":{"start":{"line":468,"column":50,"offset":17946},"end":{"line":468,"column":152,"offset":18048},"indent":[]}}],"position":{"start":{"line":468,"column":48,"offset":17944},"end":{"line":468,"column":154,"offset":18050},"indent":[]}},{"type":"text","value":" אחרת, הקוד שלך יתייחס לערכים ישנים מרינדורים קודמים. למד עוד על ","position":{"start":{"line":468,"column":154,"offset":18050},"end":{"line":468,"column":219,"offset":18115},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies","children":[{"type":"text","value":"איך לטפל בפונקציות","position":{"start":{"line":468,"column":220,"offset":18116},"end":{"line":468,"column":238,"offset":18134},"indent":[]}}],"position":{"start":{"line":468,"column":219,"offset":18115},"end":{"line":468,"column":320,"offset":18216},"indent":[]}},{"type":"text","value":" ומה ","position":{"start":{"line":468,"column":320,"offset":18216},"end":{"line":468,"column":325,"offset":18221},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often","children":[{"type":"text","value":"לעשות כשהמערך משתנה בתדירות גבוהה מדי","position":{"start":{"line":468,"column":326,"offset":18222},"end":{"line":468,"column":363,"offset":18259},"indent":[]}}],"position":{"start":{"line":468,"column":325,"offset":18221},"end":{"line":468,"column":443,"offset":18339},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":468,"column":443,"offset":18339},"end":{"line":468,"column":444,"offset":18340},"indent":[]}}],"position":{"start":{"line":468,"column":2,"offset":17898},"end":{"line":468,"column":444,"offset":18340},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אם אתה רוצה להריץ effect ולנקות אותו רק פעם אחת (ב- mount ו- unmount), תוכל להעביר מערך ריק (","position":{"start":{"line":470,"column":2,"offset":18344},"end":{"line":470,"column":95,"offset":18437},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[]</code>","position":{"start":{"line":470,"column":95,"offset":18437},"end":{"line":470,"column":99,"offset":18441},"indent":[]}},{"type":"text","value":") כארגומנט שני. זה אומר לריאקט שה- effect שלך לא תלוי ","position":{"start":{"line":470,"column":99,"offset":18441},"end":{"line":470,"column":153,"offset":18495},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"בשום","position":{"start":{"line":470,"column":154,"offset":18496},"end":{"line":470,"column":158,"offset":18500},"indent":[]}}],"position":{"start":{"line":470,"column":153,"offset":18495},"end":{"line":470,"column":159,"offset":18501},"indent":[]}},{"type":"text","value":" ערך מ- props או state, אז הוא לא צריך לרוץ מחדש. זה לא מטופל על ידי מקרה מיוחד – הדבר ממשיך ישירות מאיך מערך ה-dependencies תמיד עובד.","position":{"start":{"line":470,"column":159,"offset":18501},"end":{"line":470,"column":294,"offset":18636},"indent":[]}}],"position":{"start":{"line":470,"column":2,"offset":18344},"end":{"line":470,"column":294,"offset":18636},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אם אתה מעביר מערך ריק (","position":{"start":{"line":472,"column":2,"offset":18640},"end":{"line":472,"column":25,"offset":18663},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[]</code>","position":{"start":{"line":472,"column":25,"offset":18663},"end":{"line":472,"column":29,"offset":18667},"indent":[]}},{"type":"text","value":"), ה-props ו- state בתוך ה-effect תמיד יכילו את הערכים ההתחלתיים שלהם. בזמן שהעברת (","position":{"start":{"line":472,"column":29,"offset":18667},"end":{"line":472,"column":113,"offset":18751},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">[]</code>","position":{"start":{"line":472,"column":113,"offset":18751},"end":{"line":472,"column":117,"offset":18755},"indent":[]}},{"type":"text","value":") כארגומנט שני היא קרובה יותר למודלים המוכרים ","position":{"start":{"line":472,"column":117,"offset":18755},"end":{"line":472,"column":163,"offset":18801},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount</code>","position":{"start":{"line":472,"column":163,"offset":18801},"end":{"line":472,"column":182,"offset":18820},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":472,"column":182,"offset":18820},"end":{"line":472,"column":186,"offset":18824},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":472,"column":186,"offset":18824},"end":{"line":472,"column":208,"offset":18846},"indent":[]}},{"type":"text","value":", ישנם בדרך כלל ","position":{"start":{"line":472,"column":208,"offset":18846},"end":{"line":472,"column":224,"offset":18862},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies","children":[{"type":"text","value":"פתרונות טובים","position":{"start":{"line":472,"column":225,"offset":18863},"end":{"line":472,"column":238,"offset":18876},"indent":[]}}],"position":{"start":{"line":472,"column":224,"offset":18862},"end":{"line":472,"column":320,"offset":18958},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":472,"column":320,"offset":18958},"end":{"line":472,"column":321,"offset":18959},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often","children":[{"type":"text","value":"יותר","position":{"start":{"line":472,"column":322,"offset":18960},"end":{"line":472,"column":326,"offset":18964},"indent":[]}}],"position":{"start":{"line":472,"column":321,"offset":18959},"end":{"line":472,"column":406,"offset":19044},"indent":[]}},{"type":"text","value":" על מנת להימנע מהרצה מחדש של effects מהר מדי. בנוסף, אל תשכח שריאקט דוחה את הרצת ","position":{"start":{"line":472,"column":406,"offset":19044},"end":{"line":472,"column":487,"offset":19125},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":472,"column":487,"offset":19125},"end":{"line":472,"column":498,"offset":19136},"indent":[]}},{"type":"text","value":" עד לאחר שהדפדפן “צייר” את ה-effect, אז ביצוע עבודה נוספת היא לא בעיה.","position":{"start":{"line":472,"column":498,"offset":19136},"end":{"line":472,"column":568,"offset":19206},"indent":[]}}],"position":{"start":{"line":472,"column":2,"offset":18640},"end":{"line":472,"column":568,"offset":19206},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אנו ממליצים על שימוש בחוק ","position":{"start":{"line":474,"column":2,"offset":19210},"end":{"line":474,"column":28,"offset":19236},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/facebook/react/issues/14920","children":[{"type":"html","value":"<code class=\"gatsby-code-text\">exhaustive-deps</code>","position":{"start":{"line":474,"column":29,"offset":19237},"end":{"line":474,"column":46,"offset":19254},"indent":[]}}],"position":{"start":{"line":474,"column":28,"offset":19236},"end":{"line":474,"column":95,"offset":19303},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" כחלק מחבילת ה- ","position":{"start":{"line":474,"column":95,"offset":19303},"end":{"line":474,"column":111,"offset":19319},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation","children":[{"type":"html","value":"<code class=\"gatsby-code-text\">eslint-plugin-react-hooks</code>","position":{"start":{"line":474,"column":112,"offset":19320},"end":{"line":474,"column":139,"offset":19347},"indent":[]}}],"position":{"start":{"line":474,"column":111,"offset":19319},"end":{"line":474,"column":210,"offset":19418},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" זה מזהיר כש- dependencies מצוינים באופן לא נכון ומציעה פתרון.","position":{"start":{"line":474,"column":210,"offset":19418},"end":{"line":474,"column":272,"offset":19480},"indent":[]}}],"position":{"start":{"line":474,"column":2,"offset":19210},"end":{"line":474,"column":272,"offset":19480},"indent":[]}}],"position":{"start":{"line":466,"column":1,"offset":17889},"end":{"line":474,"column":272,"offset":19480},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#next-steps","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"השלבים הבאים ","position":{"start":{"line":476,"column":4,"offset":19485},"end":{"line":476,"column":30,"offset":19511},"indent":[]}}],"position":{"start":{"line":476,"column":1,"offset":19482},"end":{"line":476,"column":30,"offset":19511},"indent":[]},"data":{"id":"next-steps","htmlAttributes":{"id":"next-steps"},"hProperties":{"id":"next-steps"}}},{"type":"paragraph","children":[{"type":"text","value":"מזל טוב! זה היה עמוד ארוך, אבל אנו מקווים שבסופו רוב השאלות שלך בקשר ל- effects נענו. למדת גם על ה-state hook וגם על effect hook, ויש עוד ","position":{"start":{"line":478,"column":1,"offset":19513},"end":{"line":478,"column":139,"offset":19651},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"הרבה","position":{"start":{"line":478,"column":140,"offset":19652},"end":{"line":478,"column":144,"offset":19656},"indent":[]}}],"position":{"start":{"line":478,"column":139,"offset":19651},"end":{"line":478,"column":145,"offset":19657},"indent":[]}},{"type":"text","value":" שניתן לעשות עם שניהם ביחד. הם מכסים את רוב מקרי השימוש למחלקות – והיכן שהם לא, יכול להיות שתמצא את ","position":{"start":{"line":478,"column":145,"offset":19657},"end":{"line":478,"column":245,"offset":19757},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-reference.html","children":[{"type":"text","value":"Hooks נוספים","position":{"start":{"line":478,"column":246,"offset":19758},"end":{"line":478,"column":258,"offset":19770},"indent":[]}}],"position":{"start":{"line":478,"column":245,"offset":19757},"end":{"line":478,"column":287,"offset":19799},"indent":[]}},{"type":"text","value":" שימושי.","position":{"start":{"line":478,"column":287,"offset":19799},"end":{"line":478,"column":295,"offset":19807},"indent":[]}}],"position":{"start":{"line":478,"column":1,"offset":19513},"end":{"line":478,"column":295,"offset":19807},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"אנו גם מתחילים לראות איך Hooks פותרים בעיות שהוצגו במוטיבציה ","position":{"start":{"line":480,"column":1,"offset":19809},"end":{"line":480,"column":62,"offset":19870},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-intro.html#motivation","children":[{"type":"text","value":"במוטיבציה","position":{"start":{"line":480,"column":63,"offset":19871},"end":{"line":480,"column":72,"offset":19880},"indent":[]}}],"position":{"start":{"line":480,"column":62,"offset":19870},"end":{"line":480,"column":108,"offset":19916},"indent":[]}},{"type":"text","value":". ראינו איך ניקיון effect מונע שכפול ב- ","position":{"start":{"line":480,"column":108,"offset":19916},"end":{"line":480,"column":148,"offset":19956},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidUpdate</code>","position":{"start":{"line":480,"column":148,"offset":19956},"end":{"line":480,"column":168,"offset":19976},"indent":[]}},{"type":"text","value":" ו- ","position":{"start":{"line":480,"column":168,"offset":19976},"end":{"line":480,"column":172,"offset":19980},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount</code>","position":{"start":{"line":480,"column":172,"offset":19980},"end":{"line":480,"column":194,"offset":20002},"indent":[]}},{"type":"text","value":", מביא קוד קשור קרוב יותר, ועוזר לנו להימנע מבאגים. ראינו גם איך ניתן לפצל effects לפי מטרתם, שזה משהו שלא יכולנו לעשות במחלקות כלל.","position":{"start":{"line":480,"column":194,"offset":20002},"end":{"line":480,"column":326,"offset":20134},"indent":[]}}],"position":{"start":{"line":480,"column":1,"offset":19809},"end":{"line":480,"column":326,"offset":20134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"בנקודה זו יכול להיות שאתה עדיין תוהה איך Hooks עובדים. איך ריאקט יודעת איזה קריאת ","position":{"start":{"line":482,"column":1,"offset":20136},"end":{"line":482,"column":83,"offset":20218},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useState</code>","position":{"start":{"line":482,"column":83,"offset":20218},"end":{"line":482,"column":93,"offset":20228},"indent":[]}},{"type":"text","value":" מתאים לאיזה משתנה state בין רינדורים? איך ריאקט “מתאימה” effects קודמים והבאים על כל עדכון? ","position":{"start":{"line":482,"column":93,"offset":20228},"end":{"line":482,"column":186,"offset":20321},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"בעמוד הבא נלמד עוד על ","position":{"start":{"line":482,"column":188,"offset":20323},"end":{"line":482,"column":210,"offset":20345},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-rules.html","children":[{"type":"text","value":"Rules of Hooks","position":{"start":{"line":482,"column":211,"offset":20346},"end":{"line":482,"column":225,"offset":20360},"indent":[]}}],"position":{"start":{"line":482,"column":210,"offset":20345},"end":{"line":482,"column":250,"offset":20385},"indent":[]}},{"type":"text","value":" — הם חיוניים על מנת לגרום ל- Hooks לעבוד.","position":{"start":{"line":482,"column":250,"offset":20385},"end":{"line":482,"column":293,"offset":20428},"indent":[]}}],"position":{"start":{"line":482,"column":186,"offset":20321},"end":{"line":482,"column":295,"offset":20430},"indent":[]}}],"position":{"start":{"line":482,"column":1,"offset":20136},"end":{"line":482,"column":295,"offset":20430},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":483,"column":1,"offset":20431}}}}